<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>JSON Test</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <script type="text/javascript" src="jquery-1.11.2.js"></script>
    <script type="text/javascript" src="pageDatabase.js"></script>
</head>
<body>

<script type="text/javascript">  

function printPageText(currentPageID){
    return jsonDatabase.pages[currentPageID].bodyText;
}


function printPageLinks(currentPageID){
    if(jsonDatabase.pages[currentPageID].end){
        return "THE END";
    } else {
        var resultLength = jsonDatabase.pages[currentPageID].choiceLinks.length;
        var resultString = "";
        for(var i=0;i<resultLength; i++){
            // document.write("<a href='" + jsonDatabase.pages[currentPageID].choiceLinks[i].linkDestination + "'>" + jsonDatabase.pages[currentPageID].choiceLinks[i].linkText + "</a> ");
            resultString += "<a href='javascript:addNewSection(" + jsonDatabase.pages[currentPageID].choiceLinks[i].linkDestination + ");'>" + jsonDatabase.pages[currentPageID].choiceLinks[i].linkText + "</a> ";
        }
        return resultString;
    }
}


function addNewSection(newSectionID){
    var newSection = "<section id='page-" + newSectionID + "'><p>" + printPageText(newSectionID) + "</p><div>" + printPageLinks(newSectionID) + "</div></section>";
    $("#content").append(newSection);
}

</script>
    
<div id="content">
    <section>
        <p><script type="text/javascript">document.write(printPageText(0));</script></p>
        <div><script type="text/javascript">document.write(printPageLinks(0));</script></div>
    </section>
</div>

</body>
</html>